<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>员工薪水</title>

    <link href="bootstrap.min.css" th:href="@{/static/bootstrap.min.css}" rel="stylesheet">
    <style>
        label select {
            margin: 6px;
            width: 65px;
            height: 35px;
            border: 1px solid;
        }
    </style>
    <!--    选择年月-->
    <script src="jquery-1.8.3.js" th:src="@{/static/jquery-1.8.3.js}" type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            var currentYear = new Date().getFullYear();
            document.getElementById("year1").text = currentYear;
            document.getElementById("year2").text = currentYear - 1;
            document.getElementById("year3").text = currentYear - 2;
            document.getElementById("year4").text = currentYear - 3;
            document.getElementById("year5").text = currentYear - 4;
            document.getElementById("year6").text = currentYear - 5;

            var currentMonth = new Date().getMonth() + 1;
            for (var i = 1; i <= currentMonth; i++) {
                document.getElementById("month" + i).text = i;
                document.getElementById("month" + i).hidden = false;
            }

            $('#searchByWidBtn').click(function () {
                var wid = $('#wid').val();
                console.log(wid);
                if (!wid.trim()) {
                    alert("请输入合法的数值。")
                } else
                    window.location.replace("/EmployeeSalary?wid=" + wid);
            })

            $('#searchByYearMonthBtn').click(function () {
                var selectedYearId = $('#year').find('option:selected').attr("id");
                var selectedMonthId = $('#month').find('option:selected').attr("id");
                console.log("Year ID: " + selectedYearId);
                console.log("Month ID: " + selectedMonthId);

                var selectedYear = $('#year').find('option:selected').text();
                var selectedMonth = $('#month').find('option:selected').text();
                console.log("Year: " + selectedYear);
                console.log("Month: " + selectedMonth);

                if (selectedMonthId === "defaultSelectedMonth" || selectedYearId === "defaultSelectedYear") {
                    alert("请选择正确的年份和月份。");
                } else {
                    console.log("input validated.")
                    window.location.replace("/EmployeeSalary?year=" + selectedYear + "&month=" + selectedMonth);
                }
            })

            $('#searchByBoth').click(function () {
                var wid = $('#wid').val();
                var selectedYearId = $('#year').find('option:selected').attr("id");
                var selectedMonthId = $('#month').find('option:selected').attr("id");
                console.log("Year ID: " + selectedYearId);
                console.log("Month ID: " + selectedMonthId);

                var selectedYear = $('#year').find('option:selected').text();
                var selectedMonth = $('#month').find('option:selected').text();
                console.log("Year: " + selectedYear);
                console.log("Month: " + selectedMonth);

                if (selectedMonthId === "defaultSelectedMonth" || selectedYearId === "defaultSelectedYear" || !wid.trim()) {
                    alert("请选择正确的年份和月份，并输入格式正确的工号。");
                } else {
                    window.location.replace("/EmployeeSalary?year=" + selectedYear + "&month=" + selectedMonth + "&wid=" + wid);
                }
            })

        })
    </script>
</head>
<body>
<div style="margin:1.25rem ">

    <label>
        请选择年月：<select id="year" class="button1">
        <option id="defaultSelectedYear" selected="selected" disabled> - 请选择 -</option>
        <option id="year1"></option>
        <option id="year2"></option>
        <option id="year3"></option>
        <option id="year4"></option>
        <option id="year5"></option>
        <option id="year6"></option>
    </select>

        <select id="month">
            <option id="defaultSelectedMonth" selected="selected" disabled> - 请选择 -</option>
            <option hidden id="month12"></option>
            <option hidden id="month11"></option>
            <option hidden id="month10"></option>
            <option hidden id="month9"></option>
            <option hidden id="month8"></option>
            <option hidden id="month7"></option>
            <option hidden id="month6"></option>
            <option hidden id="month5"></option>
            <option hidden id="month4"></option>
            <option hidden id="month3"></option>
            <option hidden id="month2"></option>
            <option hidden id="month1"></option>
        </select>
    </label>&nbsp;
    <button type="button" class="btn btn-info" id="searchByYearMonthBtn"><span
            class="glyphicon glyphicon-qrcode"></span>
        按月查询
    </button>
    &nbsp;&nbsp;&nbsp;
    工号 ： <input type="text" id="wid" name="asubmit" style="height:35px;border: 1px solid;">&nbsp;
    <button type="button" class="btn btn-info" id="searchByWidBtn"><span class="glyphicon glyphicon-qrcode"></span>
        按工号查询
    </button>
    <button type="button" class="btn btn-info" id="searchByBoth"><span class="glyphicon glyphicon-qrcode"></span>
        月份和工号合并查询
    </button>

</div>
<div class="container">
    <div>
        <center><h2 th:text="*{msg}"></h2></center>
        <center><h1 th:if="${#lists.isEmpty(salaryList)}" style="color: red">未找到数据，请提交后重试。</h1></center>
        <table class="table table-bordered" id="outside" th:if="${not #lists.isEmpty(salaryList)}">
            <tbody>
            <tr>
                <th>工号</th>
                <th>姓名</th>
                <th>货号</th>
                <th>单价</th>
                <th>数量</th>
                <th>日期</th>
                <th>薪资</th>
            </tr>
            <tr th:each="salary: ${salaryList}">
                <td th:text="${salary.getWid()}"></td>
                <td th:text="${salary.getWname()}"></td>
                <td th:text="${salary.getProductId()}"></td>
                <td th:text="${salary.getProductPrice()}"></td>
                <td th:text="${salary.getAmount()}"></td>
                <td th:text="${salary.getDateTime()}"></td>
                <td th:text="${salary.getPrice()}"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>