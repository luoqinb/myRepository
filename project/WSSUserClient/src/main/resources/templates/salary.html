<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>å‘˜å·¥ä¿¡æ¯ç³»ç»Ÿ</title>
    <link rel="stylesheet" th:href="@{/static/base/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/static/base/css/index.css}">
    <link rel="stylesheet" th:href="@{/static/base/css/student.css}">
    <style>
        .column {
            float: left;
            width: 33.33%;
        }

        /* åˆ—åæ¸…é™¤æµ®åŠ¨ */
        .row:after {
            content: "";
            display: table;
            clear: both;
        }

        .row-in-div {
            float: none;
            height: 80px;
        }

        .d1 tr {
            height: 45px;
        }
    </style>

    <script src="../css/jquery-1.8.3.js" th:src="@{/static/base/css/jquery-1.8.3.js}" type="text/javascript"></script>
    <script>
        $(document).ready(function () {

            $('#searchButton').click(function () {
                var selectedYearId = $('#year').find('option:selected').attr("id");
                var selectedMonthId = $('#month').find('option:selected').attr("id");
                console.log("Year ID: " + selectedYearId);
                console.log("Month ID: " + selectedMonthId);

                var selectedYear = $('#year').find('option:selected').text();
                var selectedMonth = $('#month').find('option:selected').text();
                console.log("Year: " + selectedYear);
                console.log("Month: " + selectedMonth);

                if (selectedMonthId === "defaultSelectedMonth" || selectedYearId === "defaultSelectedYear") {
                    alert("è¯·é€‰æ‹©æ­£ç¡®çš„å¹´ä»½å’Œæœˆä»½ã€‚");
                }
                else {
                    console.log("input validated.")
                    window.location.replace("/salary?year=" + selectedYear + "&month=" + selectedMonth);
                }
            })

            var currentYear = new Date().getFullYear();
            document.getElementById("year1").text = currentYear;
            document.getElementById("year2").text = currentYear - 1;
            document.getElementById("year3").text = currentYear - 2;
            document.getElementById("year4").text = currentYear - 3;
            document.getElementById("year5").text = currentYear - 4;
            document.getElementById("year6").text = currentYear - 5;

            var currentMonth = new Date().getMonth() + 1;
            for (var i = 1; i <= currentMonth; i++) {
                document.getElementById("month" + i).text = i;
                document.getElementById("month" + i).hidden = false;
            }


        })
    </script>

</head>
<body>


<!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button aria-controls="navbar" aria-expanded="false" class="navbar-toggle collapsed" data-target="#navbar"
                    data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Worker Salary System</a>
        </div>
        <div class="collapse navbar-collapse" id="navbar">
            <ul class="nav navbar-nav">
                <li><a th:href="@{/home}" href="base.html">é¦–é¡µ</a></li>
                <li><a th:href="@{/submitStatus}" href="submit.html">æäº¤æƒ…å†µ</a></li>
                <li><a th:href="@{/salary}" href="salary.html">è–ªèµ„</a></li>
                <li><a th:href="@{/changePassword}" href="changepasswd.html">ä¿®æ”¹å¯†ç </a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a>æ¬¢è¿æ‚¨ï¼Œ<span th:text="${session.loginUser.username}"></span>ï¼</a></li>
                <li><a href="/logout">ã€é€€å‡ºç™»å½•ã€‘</a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div>
</nav>

<center>
    <div style="margin-top: 70px">
        <label>
            è¯·é€‰æ‹©å¹´æœˆï¼š<select id="year">
            <option id="defaultSelectedYear" selected="selected" disabled> - è¯·é€‰æ‹© -</option>
            <option id="year1" value="year1"></option>
            <option id="year2" value="year2"></option>
            <option id="year3" value="year3"></option>
            <option id="year4" value="year4"></option>
            <option id="year5" value="year5"></option>
            <option id="year6" value="year6"></option>
        </select>

            <select id="month">
                <option id="defaultSelectedMonth" selected="selected" disabled> - è¯·é€‰æ‹© -</option>
                <option hidden id="month12"></option>
                <option hidden id="month11"></option>
                <option hidden id="month10"></option>
                <option hidden id="month9"></option>
                <option hidden id="month8"></option>
                <option hidden id="month7"></option>
                <option hidden id="month6"></option>
                <option hidden id="month5"></option>
                <option hidden id="month4"></option>
                <option hidden id="month3"></option>
                <option hidden id="month2"></option>
                <option hidden id="month1"></option>
            </select>
        </label>
        &nbsp;&nbsp;
        <input id="searchButton" type="button" value="æœç´¢ ğŸ”">
        <br>
        <span id="salaryMsg" style="font-size: 12pt" th:text="${salaryMsg}"></span>
    </div>
</center>

<center>
    <div style="height: auto; width: min-content">
        <!--        <div style="margin-top:30px;width: 60%;height: 80%;overflow:auto" class="d1">-->
        <div class="d1" style="margin-top:30px;width: 900px;height: 550px;overflow: auto">
            <center><h1 th:if="${#lists.isEmpty(recordList)}" style="color: red">æœªæ‰¾åˆ°æ•°æ®ï¼Œè¯·æäº¤åé‡è¯•ã€‚</h1></center>
            <table th:if="${not #lists.isEmpty(recordList)}" class="table table table-bordered">
                <thead>
                <tr>
                    <th>æ—¥æœŸ</th>
                    <th>è´§å·</th>
                    <th>æ•°é‡</th>
                    <th>é‡‘é¢</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="record: ${recordList}" th:if="${record.getStatus() == 2}">
                    <td th:text="${record.getDateTime()}"></td>
                    <td th:text="${record.getProductId()}"></td>
                    <td th:text="${record.getAmount()}"></td>
                    <td th:text="${record.getPrice()}"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</center>

<footer class="footer">
    <div class="container">
        <p class="text-muted">
            Copyright &copy Worker Salary System.
        </p>
    </div>
</footer>
</body>


</html>